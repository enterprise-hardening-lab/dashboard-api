name: ðŸ§© App Container Governance

on:
  push:
    branches: [ main ]
  workflow_dispatch:

permissions:
  contents: read
  actions: read
  id-token: write
  security-events: write   # âœ… Required for AWS OIDC authentication

jobs:
  orchestrate:
    name: ðŸ§© Invoke Container Hardening Orchestrator
    uses: enterprise-hardening-lab/container-hardening-orchestrator/.github/workflows/orchestrator.yml@main
    with:
      app_name: "dashboard-api"
      base_image: "ubuntu"
    secrets: inherit
    permissions:
      id-token: write    # âœ… Explicitly allow OIDC token issuance for called workflow
      contents: read
