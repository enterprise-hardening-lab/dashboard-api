name: ðŸ§© App Container Governance

on:
  push:
    branches: [ main ]
  workflow_dispatch:

permissions:
  id-token: write
  contents: read
  security-events: write  # âœ… Required for SARIF upload from orchestrator

jobs:
  orchestrate:
    name: ðŸ§© Invoke Container Hardening Orchestrator
    uses: enterprise-hardening-lab/container-hardening-orchestrator/.github/workflows/orchestrator.yml@main
    with:
      app_name: "dashboard-api"
      base_image: "ubuntu"
    permissions:
      id-token: write
      contents: read
      security-events: write   # âœ… Pass SARIF upload rights to the orchestrator
    secrets: inherit
